<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Myon&#39;s Blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Christoph Berg">
    

    
<link rel="stylesheet" href="/blog/ananke/css/main.min.efe4d852f731d5d1fbb87718387202a97aafd768cdcdaed0662bbe6982e91824.css" >




    


    
      

    

    
    
      <link href="/blog/tags/unix/index.xml" rel="alternate" type="application/rss+xml" title="Myon&#39;s Blog" />
      <link href="/blog/tags/unix/index.xml" rel="feed" type="application/rss+xml" title="Myon&#39;s Blog" />
      
    

    
      <link rel="canonical" href="https://df7cb.de/blog/tags/unix.html">
    

    <meta property="og:url" content="https://df7cb.de/blog/tags/unix.html">
  <meta property="og:site_name" content="Myon&#39;s Blog">
  <meta property="og:title" content="Unix">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Unix">
  <meta itemprop="datePublished" content="2018-03-09T10:06:21+01:00">
  <meta itemprop="dateModified" content="2018-03-09T10:06:21+01:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Unix">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/blog/index.html" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Myon&#39;s Blog
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Unix
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="cf pa3 pa4-m pa4-l">
    <div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray">
      <p>Below you will find pages that utilize the taxonomy term “Unix”</p>
    </div>
  </article>
  <div class="mw8 center">
    <section class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2018/paste.html" class="link black dim">
        Cool Unix Features: paste
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p><em>paste</em> is one of those tools nobody uses [1]. It puts two file side by side,
line by line.</p>
<p>One application for this came up today where some tool was called for several
files at once and would spit out one line by file, but unfortunately not
including the filename.</p>
<pre><code>$ paste &lt;(ls *.rpm) &lt;(ls *.rpm | xargs -r rpm -q --queryformat '%{name} \n' -p)
</code></pre>
<p>[1] See &ldquo;J&rdquo; in <a href="http://ifaq.wap.org/computers/abcsofunix.html">The ABCs of Unix</a></p>
<p>[<em>PS: I meant to blog this in 2011, but apparently never committed the file&hellip;</em>]</p>
    </div>
    <a href="/blog/posts/2018/paste.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2012/grep_-r_foobar.html" class="link black dim">
        grep -r foobar
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>In Wheezy&rsquo;s grep version [1], you can omit the &ldquo;.&rdquo; in</p>
<pre>
$ grep -r foobar .
</pre>
<p>and just write</p>
<pre>
$ grep -r foobar
</pre>
<p>[1] actually since 2.11</p>
    </div>
    <a href="/blog/posts/2012/grep_-r_foobar.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2012/usr_bin_time.html" class="link black dim">
        Cool Unix Features: /usr/bin/time
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Ever wondered how much memory a program needed? Install the &ldquo;time&rdquo; package:</p>
<pre>
$ /usr/bin/time ls
[...]
0.00user 0.00system 0:00.00elapsed 0%CPU (0avgtext+0avgdata 4000maxresident)k
0inputs+0outputs (0major+311minor)pagefaults 0swaps
</pre>
<p>Unfortunately the &ldquo;time&rdquo; bash built-in makes it necessary to use the full path.</p>
<p>Thanks to youam for the tip.</p>
<p><em>Update:</em> aba notes that calling \time works as well. Thanks!</p>
    </div>
    <a href="/blog/posts/2012/usr_bin_time.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/i_need_to_look_this_up_every_time.html" class="link black dim">
        I need to look this up every time
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I need to look this up every time I need a backport (mostly PostgreSQL) at a
customer site with limited networking:</p>
<pre><code>$ lftp -c 'mget http://backports.debian.org/debian-backports/pool/main/p/postgresql-8.4/*_8.4.5-1~bpo50+1_amd64.deb'
</code></pre>
<p>Hopefully I can remember this in the future.</p>
    </div>
    <a href="/blog/posts/2010/i_need_to_look_this_up_every_time.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/dev_full.html" class="link black dim">
        Cool Unix Features: /dev/full
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I&rsquo;ve always thought about collecting random bits of useful/interesting/cool
Unix features and the like. Before I let that rot indefinitely in a text file
in my $HOME, I&rsquo;ll post it in a series of blog posts. So here&rsquo;s bit #1:</p>
<p>Everyone knows /dev/null, and most will know /dev/zero. But /dev/full was
unknown to me until some time ago. This device will respond to any write
request with ENOSPC, No space left on device. Handy if you want to test if your
program catches &ldquo;disk full&rdquo; - just let it write there:</p>
<pre><code>$ echo foo &gt; /dev/full
bash: echo: write error: No space left on device
</code></pre>
    </div>
    <a href="/blog/posts/2010/dev_full.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/column_-t.html" class="link black dim">
        Cool Unix Features: column -t
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p><em>/etc/fstab</em> files tend to be an unreadable mess of unaligned fields.</p>
<pre><code># /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
proc            /proc           proc    defaults        0       0
/dev/mapper/benz-root /               ext3    errors=remount-ro 0       1
/dev/sda1       /boot           ext3    defaults        0       2
/dev/mapper/benz-home /home           ext3    defaults        0       2
/dev/mapper/benz-swap_1 none            swap    sw              0       0
newton:/home		/nfs		nfs	defaults,soft,intr,users	0 0
/dev/scd0       /media/cdrom0   udf,iso9660 user,noauto     0       0
</code></pre>
<p>Let&rsquo;s remove some whitespace in the third line:</p>
<pre><code>#&lt;filesystem&gt; &lt;mountpoint&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
</code></pre>
<p>And then pipe everything from line 3 to the end through <em>column -t</em>:</p>
<pre><code># /etc/fstab: static file system information.
#
#&lt;filesystem&gt;            &lt;mountpoint&gt;   &lt;type&gt;       &lt;options&gt;                 &lt;dump&gt;  &lt;pass&gt;
proc                     /proc          proc         defaults                  0       0
/dev/mapper/benz-root    /              ext3         errors=remount-ro         0       1
/dev/sda1                /boot          ext3         defaults                  0       2
/dev/mapper/benz-home    /home          ext3         defaults                  0       2
/dev/mapper/benz-swap_1  none           swap         sw                        0       0
newton:/home             /nfs           nfs          defaults,soft,intr,users  0       0
/dev/scd0                /media/cdrom0  udf,iso9660  user,noauto               0       0
</code></pre>
<p>Thanks to SP8472 for bringing this to my attention.</p>
    </div>
    <a href="/blog/posts/2010/column_-t.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/date_at.html" class="link black dim">
        Cool Unix Features: date -d @
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I&rsquo;ve always been annoyed about how hard it is to convert seconds-since-epoch to
strings. I&rsquo;ve always been using &ldquo;date -d &lsquo;1970-01-01 + 1234 sec&rsquo;&rdquo;, but as it
turned out, that&rsquo;s wrong because it uses the wrong timezone. Luckily, there&rsquo;s a
slick replacement:</p>
<pre><code>$ date -d '@1234'
Do 1. Jan 01:20:34 CET 1970
</code></pre>
<p>The right version of the &ldquo;long&rdquo; version is:</p>
<pre><code>$ date -d '1970-01-01 UTC + 1234 sec'
Do 1. Jan 01:20:34 CET 1970
</code></pre>
    </div>
    <a href="/blog/posts/2010/date_at.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/df_-t.html" class="link black dim">
        Cool Unix Features: df -T
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Just discovered (thanks to XTaran): <em>df -T</em> &ndash; show file system type.</p>
<pre><code>$ df -Th
Filesystem    Type    Size  Used Avail Use% Mounted on
/dev/mapper/benz-root
              ext3    6.6G  4.9G  1.4G  79% /
tmpfs        tmpfs    1.6G     0  1.6G   0% /lib/init/rw
udev         tmpfs    1.6G  228K  1.6G   1% /dev
tmpfs        tmpfs    1.6G     0  1.6G   0% /dev/shm
/dev/sda1     ext3    236M   21M  203M  10% /boot
/dev/mapper/benz-home
              ext3    135G   82G   53G  61% /home
newton:/home   nfs    459G  145G  291G  34% /nfs
</code></pre>
    </div>
    <a href="/blog/posts/2010/df_-t.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/flock.html" class="link black dim">
        Cool Unix Features: flock
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Lockfiles are usually hard to get right, especially in sh scripts. The best bet
so far was &ldquo;lockfile&rdquo; included with procmail, but its semantics are pretty
weird. (Try to understand what exit code you want, with or without &ldquo;-!&rdquo;.) Not
to mention that failing to clean up the lockfile will stop the next cron run,
etc.</p>
<p>Since Lenny, util-linux ships &ldquo;flock&rdquo;. Now you simply say</p>
<pre><code>$ flock /path/to/lockfile /path/to/command
</code></pre>
<p>and are done. If you want it non-blocking, add &ldquo;-n&rdquo;:</p>
<pre><code>$ flock -n /path/to/lockfile /path/to/command
</code></pre>
<p>I should probably migrate all my cronjobs to use this.</p>
    </div>
    <a href="/blog/posts/2010/flock.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/nproc.html" class="link black dim">
        Cool Unix Features: nproc
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Since coreutils 8.1 (in Squeeze, not Lenny), there is a command that simply
prints out how many processors (cores, processing units) are available:</p>
<pre><code>$ nproc
2
</code></pre>
<p>The use case is obvious:</p>
<pre><code>$ make -j $(nproc)
</code></pre>
<p>On a side note, this is gnulib&rsquo;s nproc module wrapped into a C program. If you
didn&rsquo;t know gnulib before (it had slipped my attention until recently), it is a
library of portability functions and other useful things. Adding it to a
project is simply done by calling gnulib-tool and tweaking a few lines in the
automake/whatever build scripts.</p>
<p><i>PS: do not use nproc unconditionally in debian/rules. Parse
DEB_BUILD_OPTIONS for &ldquo;parallel&rdquo; instead.</i></p>
    </div>
    <a href="/blog/posts/2010/nproc.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/paste.html" class="link black dim">
        Cool Unix Features: paste
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p><em>paste</em> is one of those tools nobody uses [1]. It puts two file side by side,
line by line.</p>
<p>One application for this came up today where some tool was called for several
files at once and would spit out one line by file, but unfortunately not
including the filename.</p>
<pre><code>$ paste &lt;(ls *.rpm) &lt;(ls *.rpm | xargs -r rpm -q --queryformat '%{name} \n' -p)
</code></pre>
<p>[1] See &ldquo;J&rdquo; in <a href="http://ifaq.wap.org/computers/abcsofunix.html">The ABCs of Unix</a></p>
    </div>
    <a href="/blog/posts/2010/paste.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/stat.html" class="link black dim">
        Cool Unix Features: stat
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>&ldquo;stat&rdquo; is &ldquo;date +format&rdquo; for files:</p>
<pre><code>$ stat -c %s ~/me.jpg  # size
520073
$ stat -c %U ~/me.jpg  # owner
cbe
</code></pre>
<p>No more parsing of &ldquo;ls&rdquo; output or similar hacks.</p>
<p>It also shows detailed information about files.</p>
<pre><code>$ stat ~/me.jpg
  File: „/home/cbe/me.jpg“
  Size: 520073          Blocks: 1024       IO Block: 4096   reguläre Datei
Device: fe03h/65027d    Inode: 12427268    Links: 1
Access: (0600/-rw-------)  Uid: ( 2062/     cbe)   Gid: ( 2062/     cbe)
Access: 2010-06-06 12:58:07.000000000 +0200
Modify: 2010-04-09 22:38:46.000000000 +0200
Change: 2010-04-26 14:18:00.000000000 +0200
</code></pre>
<p>It supports similar features for stat&rsquo;ing filesystems.</p>
    </div>
    <a href="/blog/posts/2010/stat.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/seq.html" class="link black dim">
        seq is nice, but ...
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <pre><code>$ for i in `seq 1 40` ; do ./something $i ; done
$ for i in $(seq 1 40) ; do ./something $i ; done
</code></pre>
<p><em>seq</em> is nice for that, but the syntax feels a bit hard to type. If you don&rsquo;t
need sh compatibility (read: in bash/zsh), try:</p>
<pre><code>$ for i in {1..40} ; do ./something $i ; done
</code></pre>
<p><em>PS: no spaces allowed</em></p>
<p><em>PS 2: another useful feature is prefixes/suffixes as in &ldquo;touch {1..40}.txt&rdquo;</em></p>
    </div>
    <a href="/blog/posts/2010/seq.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2010/using_multiple_imap_accounts_with_mutt.html" class="link black dim">
        Using multiple IMAP accounts with Mutt
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Mutt&rsquo;s configuration is sometime more a toolbox than something offering ready
solutions, and &ldquo;how to I use multiple accounts?&rdquo; is one of the most FAQs.
Here&rsquo;s a condensed version of my setup.</p>
<p>In the most simple solution, just &lsquo;c&rsquo;hange folders to the IMAP server:</p>
<pre><code>c imaps://imap.example.com &lt;enter&gt;
c imaps://imap.otherdomain.tld &lt;enter&gt;
</code></pre>
<p>That&rsquo;s cumbersome to type, so let&rsquo;s automate it:</p>
<pre><code># .mutt/muttrc
macro index &lt;f2&gt; '&lt;change-folder&gt;imaps://imap.example.com&lt;enter&gt;'
macro index &lt;f3&gt; '&lt;change-folder&gt;imaps://imap.otherdomain.tld&lt;enter&gt;'
</code></pre>
<p>That would be the basic setup.</p>
<p>The two accounts have settings associated with them, we put them in two files:</p>
<pre><code># .mutt/account.example
set from=me@example.com
set hostname=&quot;example.com&quot;
set folder=&quot;imaps://imap.example.com/&quot;
set postponed=&quot;=Drafts&quot;
set spoolfile=&quot;imaps://imap.example.com/INBOX&quot;
set signature=&quot;~/.mutt/signature.example&quot;
set smtp_url=&quot;smtp://me@mail.example.com&quot; smtp_pass=&quot;$my_pw_example&quot;

# .mutt/account.otherdomain
set from=myself@otherdomain.tld
set hostname=&quot;otherdomain.tld&quot;
set folder=&quot;imaps://imap.otherdomain.tld/&quot;
set postponed=&quot;=Drafts&quot;
set spoolfile=&quot;imaps://imap.otherdomain.tld/INBOX&quot;
set signature=&quot;~/.mutt/signature.otherdomain&quot;
set smtp_url=&quot;smtp://myself@mail.otherdomain.tld&quot; smtp_pass=&quot;$my_pw_otherdomain&quot;
</code></pre>
<p>Now all that&rsquo;s left to do is two folder-hooks to load the files:</p>
<pre><code># .mutt/muttrc
folder-hook 'example.com' 'source ~/.mutt/account.example'
folder-hook 'otherdomain.tld' 'source ~/.mutt/account.otherdomain'
# switch to default account on startup
source ~/.mutt/account.example
</code></pre>
<p>A slight variation of the macros also uses the account files:</p>
<pre><code>macro index &lt;f2&gt; '&lt;sync-mailbox&gt;&lt;enter-command&gt;source ~/.mutt/account.example&lt;enter&gt;&lt;change-folder&gt;!&lt;enter&gt;'
macro index &lt;f3&gt; '&lt;sync-mailbox&gt;&lt;enter-command&gt;source ~/.mutt/account.otherdomain&lt;enter&gt;&lt;change-folder&gt;!&lt;enter&gt;'
</code></pre>
<p>To save entering the password all the time, we use account-hooks:</p>
<pre><code>account-hook example.org 'set imap_user=me imap_pass=pw1'
account-hook otherdomain.tld 'set imap_user=myself imap_pass=pw2'
</code></pre>
<p>Putting passwords in configs isn&rsquo;t something I like, so I pull them from the
Gnome keyring:</p>
<pre><code>set my_pw_example=`gnome-keyring-query get mutt_example`
set my_pw_otherdomain=`gnome-keyring-query get mutt_otherdomain`
account-hook example.org 'set imap_user=me imap_pass=$my_pw_example'
account-hook otherdomain.tld 'set imap_user=myself imap_pass=$my_pw_otherdomain'
</code></pre>
<p>(I found gnome-keyring-query in the
<a href="http://www.gentoo-wiki.info/HOWTO_Use_gnome-keyring_to_store_SSH_passphrases">Gentoo Wiki</a>.)</p>
<p>Martti Rahkila has <a href="http://www.acoustics.hut.fi/~mara/mutt/profiles.html">more verbose article</a> with similar ideas.</p>
<p><em>Update 2013-01-02:</em> smtp_url and smtp_pass added</p>
    </div>
    <a href="/blog/posts/2010/using_multiple_imap_accounts_with_mutt.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
    </section>
  </div>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://df7cb.de/blog/index.html" >
    &copy;  Myon's Blog 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
