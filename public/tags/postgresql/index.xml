<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Postgresql on Myon&#39;s Blog</title>
    <link>https://df7cb.de/blog/tags/postgresql.html</link>
    <description>Recent content in Postgresql on Myon&#39;s Blog</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 26 Aug 2023 23:49:40 +0200</lastBuildDate>
    <atom:link href="https://df7cb.de/blog/tags/postgresql/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PostgreSQL Popularity Contest</title>
      <link>https://df7cb.de/blog/posts/2023/popcon-postgresql.html</link>
      <pubDate>Sat, 26 Aug 2023 23:49:40 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2023/popcon-postgresql.html</guid>
      <description>&lt;p&gt;Back in 2015, when PostgreSQL 9.5 alpha 1 was released, I had posted the&#xA;&lt;a href=&#34;https://www.df7cb.de/blog/2015/PostgreSQL_9.5_in_Debian.html&#34;&gt;PostgreSQL data from Debian&amp;rsquo;s popularity contest&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;8 years and 8 PostgreSQL releases later, the graph now looks like this:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://qa.debian.org/popcon-graph.php?packages=postgresql+postgresql-7.4+postgresql-8.0+postgresql-8.1+postgresql-8.2+postgresql-8.3+postgresql-8.4+postgresql-9.0+postgresql-9.1+postgresql-9.2+postgresql-9.3+postgresql-9.4+postgresql-9.5+postgresql-9.6+postgresql-10+postgresql-11+postgresql-12+postgresql-13+postgresql-14+postgresql-15+postgresql-16&amp;show_installed=on&amp;want_legend=on&amp;want_ticks=on&amp;from_date=&amp;to_date=&amp;hlght_date=&amp;date_fmt=%25Y-%25m&amp;beenhere=1&#34;&gt;&lt;img src=&#34;https://www.df7cb.de/blog/2023/popcon-postgresql.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Currently, the most popular PostgreSQL on Debian systems is still PostgreSQL 13 (shipped in Bullseye), followed by PostgreSQL 11 (Buster). At the time of writing,&#xA;PostgreSQL 9.6 (Stretch) and PostgreSQL 15 (Bookworm) share the third place, with 15 rising quickly.&lt;/p&gt;</description>
    </item>
    <item>
      <title>PostgreSQL and Undelete</title>
      <link>https://df7cb.de/blog/posts/2021/postgresql-undelete.html</link>
      <pubDate>Thu, 18 Nov 2021 11:21:51 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2021/postgresql-undelete.html</guid>
      <description>&lt;h2 id=&#34;pg_dirtyread&#34;&gt;pg_dirtyread&lt;/h2&gt;&#xA;&lt;p&gt;Earlier this week, I updated &lt;a href=&#34;https://github.com/df7cb/pg_dirtyread&#34;&gt;pg_dirtyread&lt;/a&gt;&#xA;to work with &lt;a href=&#34;https://www.postgresql.org/docs/14/index.html&#34;&gt;PostgreSQL 14&lt;/a&gt;.&#xA;pg_dirtyread is a PostgreSQL extension that allows reading &amp;ldquo;dead&amp;rdquo; rows from&#xA;tables, i.e. rows that have already been deleted, or updated. Of course that&#xA;works only if the table has not been cleaned-up yet by a VACUUM command or&#xA;autovacuum, which is PostgreSQL&amp;rsquo;s garbage collection machinery.&lt;/p&gt;&#xA;&lt;p&gt;Here&amp;rsquo;s an example of pg_dirtyread in action:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# create table foo (id int, t text);&#xA;CREATE TABLE&#xA;# insert into foo values (1, &amp;#39;Doc1&amp;#39;);&#xA;INSERT 0 1&#xA;# insert into foo values (2, &amp;#39;Doc2&amp;#39;);&#xA;INSERT 0 1&#xA;# insert into foo values (3, &amp;#39;Doc3&amp;#39;);&#xA;INSERT 0 1&#xA;&#xA;# select * from foo;&#xA; id │  t&#xA;────┼──────&#xA;  1 │ Doc1&#xA;  2 │ Doc2&#xA;  3 │ Doc3&#xA;(3 rows)&#xA;&#xA;# delete from foo where id &amp;lt; 3;&#xA;DELETE 2&#xA;&#xA;# select * from foo;&#xA; id │  t&#xA;────┼──────&#xA;  3 │ Doc3&#xA;(1 row)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Oops! The first two documents have disappeared.&lt;/p&gt;&#xA;&lt;p&gt;Now let&amp;rsquo;s use pg_dirtyread to look at the table:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# create extension pg_dirtyread;&#xA;CREATE EXTENSION&#xA;&#xA;# select * from pg_dirtyread(&amp;#39;foo&amp;#39;) t(id int, t text);&#xA; id │  t&#xA;────┼──────&#xA;  1 │ Doc1&#xA;  2 │ Doc2&#xA;  3 │ Doc3&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;All three documents are still there, but only one of them is visible.&lt;/p&gt;&#xA;&lt;p&gt;pg_dirtyread can also show PostgreSQL&amp;rsquo;s system colums with the row location and&#xA;visibility information. For the first two documents, xmax is set, which means&#xA;the row has been deleted:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# select * from pg_dirtyread(&amp;#39;foo&amp;#39;) t(ctid tid, xmin xid, xmax xid, id int, t text);&#xA; ctid  │ xmin │ xmax │ id │  t&#xA;───────┼──────┼──────┼────┼──────&#xA; (0,1) │ 1577 │ 1580 │  1 │ Doc1&#xA; (0,2) │ 1578 │ 1580 │  2 │ Doc2&#xA; (0,3) │ 1579 │    0 │  3 │ Doc3&#xA;(3 rows)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;undelete&#34;&gt;Undelete&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Caveat:&lt;/strong&gt; &lt;em&gt;I&amp;rsquo;m not promising any of the ideas quoted below will actually work in&#xA;practice. There are a few caveats and a good portion of intricate knowledge&#xA;about the PostgreSQL internals might be required to succeed properly. Consider&#xA;consulting your favorite PostgreSQL support channel for advice if you need to&#xA;recover data on any production system.&lt;/em&gt; &lt;strong&gt;Don&amp;rsquo;t try this at work.&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;I always had plans to extend pg_dirtyread to include some &amp;ldquo;undelete&amp;rdquo; command to&#xA;make deleted rows reappear, but never got around to trying that. But rows can already be&#xA;restored by using the output of pg_dirtyread itself:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# insert into foo select * from pg_dirtyread(&amp;#39;foo&amp;#39;) t(id int, t text) where id = 1;&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This is not a true &amp;ldquo;undelete&amp;rdquo;, though - it just inserts new rows from the data&#xA;read from the table.&lt;/p&gt;&#xA;&lt;h2 id=&#34;pg_surgery&#34;&gt;pg_surgery&lt;/h2&gt;&#xA;&lt;p&gt;Enter &lt;a href=&#34;https://www.postgresql.org/docs/current/pgsurgery.html&#34;&gt;pg_surgery&lt;/a&gt;,&#xA;which is a new PostgreSQL extension supplied with PostgreSQL 14. It contains&#xA;two functions to &amp;ldquo;perform surgery on a damaged relation&amp;rdquo;. As a side-effect,&#xA;they can also make delete tuples reappear.&lt;/p&gt;&#xA;&lt;p&gt;As I discovered now, one of the functions, heap_force_freeze(), works nicely&#xA;with pg_dirtyread. It takes a list of ctids (row locations) that it marks&#xA;&amp;ldquo;frozen&amp;rdquo;, but at the same time as &amp;ldquo;not deleted&amp;rdquo;.&lt;/p&gt;&#xA;&lt;p&gt;Let&amp;rsquo;s apply it to our test table, using the ctids that pg_dirtyread can read:&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# create extension pg_surgery;&#xA;CREATE EXTENSION&#xA;&#xA;# select heap_force_freeze(&amp;#39;foo&amp;#39;, array_agg(ctid))&#xA;    from pg_dirtyread(&amp;#39;foo&amp;#39;) t(ctid tid, xmin xid, xmax xid, id int, t text) where id = 1;&#xA; heap_force_freeze&#xA;───────────────────&#xA;&#xA;(1 row)&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Et voilà, our deleted document is back:&lt;/p&gt;</description>
    </item>
    <item>
      <title>arm64 on apt.postgresql.org</title>
      <link>https://df7cb.de/blog/posts/2020/arm64-on-apt.postgresql.org.html</link>
      <pubDate>Mon, 04 May 2020 14:28:54 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2020/arm64-on-apt.postgresql.org.html</guid>
      <description>&lt;p&gt;The &lt;a href=&#34;https://apt.postgresql.org/&#34;&gt;apt.postgresql.org&lt;/a&gt; repository has been extended&#xA;to cover the &lt;em&gt;arm64&lt;/em&gt; architecture.&lt;/p&gt;&#xA;&lt;p&gt;We had occasionally received user request to add &amp;ldquo;arm&amp;rdquo; in the past, but it was&#xA;never really clear which kind of &amp;ldquo;arm&amp;rdquo; made sense to target for PostgreSQL. In&#xA;terms of Debian architectures, there&amp;rsquo;s (at least) armel, armhf, and arm64.&#xA;Furthermore, Raspberry Pis are very popular (and indeed what most users seemed&#xA;to were asking about), but the raspbian &amp;ldquo;armhf&amp;rdquo; port is incompatible with the&#xA;Debian &amp;ldquo;armhf&amp;rdquo; port.&lt;/p&gt;&#xA;&lt;p&gt;Now that most hardware has moved to 64-bit, it was becoming clear that &amp;ldquo;arm64&amp;rdquo;&#xA;was the way to go. Amit Khandekar made it happen that&#xA;&lt;a href=&#34;https://intl.huaweicloud.com/en-us/&#34;&gt;HUAWEI Cloud Services&lt;/a&gt;&#xA;donated a arm64 build host with enough resources to build the arm64 packages&#xA;at the same speed as the existing amd64, i386, and ppc64el architectures.&#xA;A few days later, all the build jobs were done, including passing all&#xA;test-suites. Very few arm-specific issues were encountered which makes me&#xA;confident that arm64 is a solid architecture to run PostgreSQL on.&lt;/p&gt;&#xA;&lt;p&gt;We are targeting Debian buster (stable), bullseye (testing), and sid&#xA;(unstable), and Ubuntu bionic (18.04) and focal (20.04). To use the arm64&#xA;archive, just add the normal sources.list entry:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;deb https://apt.postgresql.org/pub/repos/apt buster-pgdg main&#xA;&lt;/pre&gt;&#xA;&lt;h2&gt;Ubuntu focal&lt;/h2&gt;&#xA;&lt;p&gt;At the same time, I&amp;rsquo;ve added the next Ubuntu LTS release to apt.postgresql.org:&#xA;focal (20.04). It ships amd64, arm64, and ppc64el binaries.&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;deb https://apt.postgresql.org/pub/repos/apt focal-pgdg main&#xA;&lt;/pre&gt;&#xA;&lt;h2&gt;Old PostgreSQL versions&lt;/h2&gt;&#xA;&lt;p&gt;Many PostgreSQL extensions are still supporting older server versions that are&#xA;EOL. For testing these extension, server packages need to be available. I&amp;rsquo;ve&#xA;built packages for PostgreSQL 9.2+ on all Debian distributions, and all Ubuntu&#xA;LTS distributions. 9.1 will follow shortly.&lt;/p&gt;&#xA;&lt;p&gt;This means people can move to newer base distributions in their .travis.yml,&#xA;.gitlab-ci.yml, and other CI files.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Announcing apt-archive.postgresql.org</title>
      <link>https://df7cb.de/blog/posts/2020/apt-archive.postgresql.org.html</link>
      <pubDate>Tue, 24 Mar 2020 12:08:48 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2020/apt-archive.postgresql.org.html</guid>
      <description>&lt;p&gt;Users had often asked where they could find older versions of packages from&#xA;&lt;a href=&#34;https://apt.postgresql.org/&#34;&gt;apt.postgresql.org&lt;/a&gt;. I had been&#xA;collecting these since about April 2013, and in July 2016, I made the packages&#xA;available via an ad-hoc URL on the repository master host, called &amp;ldquo;the morgue&amp;rdquo;.&#xA;There was little repository structure, all files belonging to a source package&#xA;were stuffed into a single directory, no matter what distribution they belonged&#xA;to. Besides this not being particularly accessible for users, the main problem&#xA;was the ever-increasing need for more disk space on the repository host. We are&#xA;now at 175 GB for the archive, of which 152 GB is for the morgue.&lt;/p&gt;&#xA;&lt;p&gt;Our friends from &lt;a href=&#34;https://yum.postgresql.org/&#34;&gt;yum.postgresql.org&lt;/a&gt;&#xA;have had a proper archive host (yum-archive.postgresql.org) for some time&#xA;already, so it was about time to follow suit and implement a proper archive&#xA;for apt.postgresql.org as well, usable from apt.&lt;/p&gt;&#xA;&lt;p&gt;So here it is:&#xA;&lt;b&gt;&lt;a href=&#34;https://apt-archive.postgresql.org/&#34;&gt;apt-archive.postgresql.org&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&#xA;&lt;p&gt;The archive covers all past and current Debian and Ubuntu distributions. The&#xA;apt sources.lists entries are similar to the main repository, just with &amp;ldquo;-archive&amp;rdquo;&#xA;appended to the host name and the&#xA;&lt;a href=&#34;https://apt-archive.postgresql.org/pub/repos/apt/dists/index.html&#34;&gt;distribution&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;deb https://apt-archive.postgresql.org/pub/repos/apt DIST-pgdg-archive main&#xA;deb-src https://apt-archive.postgresql.org/pub/repos/apt DIST-pgdg-archive main&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;The oldest PostgreSQL server versions covered there are 8.2.23, 8.3.23, 8.4.17,&#xA;9.0.13, 9.1.9, 9.2.4, 9.3beta1, and everything newer.&lt;/p&gt;&#xA;&lt;p&gt;Some example:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;$ apt-cache policy postgresql-12&#xA;postgresql-12:&#xA;  Installed: 12.2-2.pgdg+1+b1&#xA;  Candidate: 12.2-2.pgdg+1+b1&#xA;  Version table:&#xA; *** 12.2-2.pgdg+1+b1 900&#xA;        500 http://apt.postgresql.org/pub/repos/apt sid-pgdg/main amd64 Packages&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;        100 /var/lib/dpkg/status&#xA;     12.2-2.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12.2-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12.1-2.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12.1-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12.0-2.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12.0-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12~rc1-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12~beta4-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12~beta3-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12~beta2-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;     12~beta1-1.pgdg+1 500&#xA;        500 https://apt-archive.postgresql.org/pub/repos/apt sid-pgdg-archive/main amd64 Packages&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Because this is hosted on S3, browsing directories is only supported indirectly by&#xA;static index.html files, so if you want to look at some specific URL, append&#xA;&amp;ldquo;/index.html&amp;rdquo; to see it.&lt;/p&gt;&#xA;&lt;p&gt;The archive is powered by a&#xA;&lt;a href=&#34;https://git.postgresql.org/gitweb/?p=pgapt.git;a=tree;f=pgapt-db/sql&#34;&gt;PostgreSQL database&lt;/a&gt; and a&#xA;&lt;a href=&#34;https://git.postgresql.org/gitweb/?p=pgapt.git;a=tree;f=repo/bin&#34;&gt;bunch of python/shell scripts&lt;/a&gt;,&#xA;from which the apt index files are built.&lt;/p&gt;&#xA;&lt;h2&gt;Archiving old distributions&lt;/h2&gt;&#xA;&lt;p&gt;I&amp;rsquo;m also using the opportunity to remove some long-retired distributions from the main&#xA;repository host. The following distributions have been moved over:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Debian etch (4.0)&lt;/li&gt;&#xA;&lt;li&gt;Debian lenny (5.0)&lt;/li&gt;&#xA;&lt;li&gt;Debian squeeze (6.0)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu lucid (10.04)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu saucy (13.10)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu utopic (14.10)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu wily (15.10)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu zesty (17.04)&lt;/li&gt;&#xA;&lt;li&gt;Ubuntu cosmic (18.10)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;They are available as &amp;ldquo;&lt;em&gt;DIST&lt;/em&gt;-pgdg&amp;rdquo; from the archive, e.g. squeeze:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;deb https://apt-archive.postgresql.org/pub/repos/apt squeeze-pgdg main&#xA;deb-src https://apt-archive.postgresql.org/pub/repos/apt squeeze-pgdg main&#xA;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>10 Years Debian Developer</title>
      <link>https://df7cb.de/blog/posts/2015/10_years_debian_developer.html</link>
      <pubDate>Sat, 05 Sep 2015 23:43:30 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2015/10_years_debian_developer.html</guid>
      <description>&lt;p&gt;I knew it was about this time of the year 10 years ago when my Debian account&#xA;was created, but I couldn&amp;rsquo;t remember the exact date until I looked it up&#xA;earlier this evening: today :). Rene Engelhard had been my advocate, and Marc&#xA;Brockschmidt my AM. Thanks guys!&lt;/p&gt;&#xA;&lt;p&gt;A lot of time has passed since then, and I&amp;rsquo;ve worked in various parts of the&#xA;project. I became an application manager almost immediately, and quickly got&#xA;into the NM front desk as well, revamping parts of the NM process which had&#xA;become pretty bureaucratic (I think we are now, 10 years later, back where we&#xA;should be, thanks to almost all of the paperwork being automated, thanks&#xA;Enrico!). I&amp;rsquo;ve processed 37 NMs, most of them between 2005 and 2008, later I&#xA;was only active as front desk and eventually Debian account manager. I&amp;rsquo;ve&#xA;recently picked up AMing again, which I still find quite refreshing as the AM&#xA;will always also learn new things.&lt;/p&gt;&#xA;&lt;p&gt;Quality Assurance was and is the other big field. Starting by doing QA uploads&#xA;of orphaned packages, I attended some QA meetings around Germany, and picked up&#xA;maintenance of the DDPO pages, which I still maintain. The link between QA and&#xA;NM is the MIA team where I was active for some years until they kindly kicked&#xA;me out because I was MIA there myself. I&amp;rsquo;m glad they are still using some of&#xA;the scripts I was writing to automate some things.&lt;/p&gt;&#xA;&lt;p&gt;My favorite MUA is mutt, of which I became co-maintainer in 2007, and later&#xA;maintainer. I&amp;rsquo;m still listed in the uploaders field, but admittedly I haven&amp;rsquo;t&#xA;really done anything there lately.&lt;/p&gt;&#xA;&lt;p&gt;Also in 2007 I started working at credativ, after having been a research&#xA;assistant at the university, which meant making my Debian work professional. Of&#xA;course it also meant more real work and less time for the hobby part, but I was&#xA;still very active around that time. Later in 2010 I was marrying, and we got&#xA;two kids, at which point family was of course much more important, so my Debian&#xA;involvement dropped to a minimum. (Mostly lurking on IRC ;)&lt;/p&gt;&#xA;&lt;p&gt;Being a PostgreSQL consultant at work, it was natural to start looking into the&#xA;packaging, so I started submitting patches to postgresql-common in 2011, and&#xA;became a co-maintainer in 2012. Since then, I&amp;rsquo;ve mostly been working on&#xA;PostgreSQL-related packages, of which far too many have my (co-)maintainer&#xA;stamp on them. To link the Debian and PostgreSQL worlds together, we started an&#xA;external repository (apt.postgresql.org) that contains packages for the&#xA;PostgreSQL major releases that Debian doesn&amp;rsquo;t ship. Most of my open source time&#xA;at the moment is spent on getting all PostgreSQL packages in shape for Debian&#xA;and this repository.&lt;/p&gt;&#xA;&lt;p&gt;According to minechangelogs, currently 844 changelog entries in Debian mention&#xA;my name, or were authored by me. Scrolling back yields memories of packages&#xA;that are long gone again from unstable, or I passed on to other maintainers.&#xA;There are way too many people in Debian that I enjoy(ed) working with to list&#xA;them here, and many of them are my friends. Debian is really the extended&#xA;family on the internet. My last DebConf before this year had been in Mar del&#xA;Plata - I had met some people at other conferences like FOSDEM, but meeting&#xA;(almost) everyone again in Heidelberg was very nice. I even remembered all&#xA;basic Mao rules :D.&lt;/p&gt;</description>
    </item>
    <item>
      <title>PostgreSQL 9.5 in Debian</title>
      <link>https://df7cb.de/blog/posts/2015/postgresql_9.5_in_debian.html</link>
      <pubDate>Thu, 02 Jul 2015 20:41:07 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2015/postgresql_9.5_in_debian.html</guid>
      <description>&lt;p&gt;Today saw the release of PostgreSQL 9.5 Alpha 1. Packages for all supported&#xA;Debian and Ubuntu releases are available on &lt;a href=&#34;http://apt.postgresql.org/&#34;&gt;apt.postgresql.org&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;tt&gt;&#xA;deb http://apt.postgresql.org/pub/repos/apt/ &lt;i&gt;YOUR_RELEASE_HERE&lt;/i&gt;-pgdg main 9.5&#xA;&lt;/tt&gt;&#xA;&lt;p&gt;The package is also waiting in NEW to be accepted for Debian experimental.&lt;/p&gt;&#xA;&lt;p&gt;Being curious which PostgreSQL releases have been in use over time, I pulled some graphics&#xA;from &lt;a href=&#34;https://qa.debian.org/popcon-graph.php?packages=postgresql+postgresql-7.4+postgresql-8.0+postgresql-8.1+postgresql-8.2+postgresql-8.3+postgresql-8.4+postgresql-9.0+postgresql-9.1+postgresql-9.2+postgresql-9.3+postgresql-9.4+postgresql-9.5&amp;show_installed=on&amp;want_legend=on&amp;want_ticks=on&amp;from_date=&amp;to_date=&amp;hlght_date=&amp;date_fmt=%25Y-%25m&amp;beenhere=1&#34;&gt;Debian&amp;rsquo;s popularity contest data&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://qa.debian.org/popcon-graph.php?packages=postgresql+postgresql-7.4+postgresql-8.0+postgresql-8.1+postgresql-8.2+postgresql-8.3+postgresql-8.4+postgresql-9.0+postgresql-9.1+postgresql-9.2+postgresql-9.3+postgresql-9.4+postgresql-9.5&amp;show_installed=on&amp;want_legend=on&amp;want_ticks=on&amp;from_date=&amp;to_date=&amp;hlght_date=&amp;date_fmt=%25Y-%25m&amp;beenhere=1&#34;&gt;&lt;img src=&#34;https://www.df7cb.de/blog/2015/popcon-postgresql.png&#34;&gt;&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;Before we included the PostgreSQL major version in the package name,&#xA;&amp;ldquo;postgresql&amp;rdquo; contained the server, so that line represents the installation&#xA;count of the pre-7.4 releases at the left end of the graph.&lt;/p&gt;&#xA;&lt;p&gt;Interestingly, 7.4 reached its installation peak well past 8.1&amp;rsquo;s. Does anyone have an&#xA;idea why that happened?&lt;/p&gt;</description>
    </item>
    <item>
      <title>apt.postgresql.org statistics</title>
      <link>https://df7cb.de/blog/posts/2015/apt.postgresql.org_statistics.html</link>
      <pubDate>Wed, 04 Feb 2015 11:24:22 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2015/apt.postgresql.org_statistics.html</guid>
      <description>&lt;p&gt;At this year&amp;rsquo;s FOSDEM I gave a talk in the PostgreSQL devroom&#xA;about &lt;a href=&#34;http://www.df7cb.de/projects/talks/2015-FOSDEM/&#34;&gt;&#xA;Large Scale Quality Assurance in the PostgreSQL Ecosystem&lt;/a&gt;.&#xA;The talk included a graph about the growth of the&#xA;&lt;a href=&#34;https://apt.postgresql.org/&#34;&gt;apt.postgresql.org&lt;/a&gt;&#xA;repository that I want to share here as well:&lt;/p&gt;&#xA;&lt;img src=&#34;https://www.df7cb.de/blog/2015/apt-stats.png&#34;&gt;&#xA;&lt;p&gt;The yellow line at the very bottom is the number of different source package&#xA;names, currently 71. From that, a somewhat larger number of actual source&#xA;packages that include the &amp;ldquo;pgdgXX&amp;rdquo; version suffixes targeting the various&#xA;distributions we have is built (blue). The number of different binary package&#xA;names (green) is in about the same range. The dimension explosion then happens&#xA;for the actual number of binary packages (black, almost 8000) targeting all&#xA;distributions and architectures.&lt;/p&gt;&#xA;&lt;p&gt;The red line is the total size of the pool/ directory, currently a bit less&#xA;than 6GB.&lt;/p&gt;&#xA;&lt;p&gt;(The graphs sometimes decrease when packages in the -testing distributions are&#xA;promoted to the live distributions and the old live packages get removed.)&lt;/p&gt;</description>
    </item>
    <item>
      <title>PostgreSQL 9.4 on Debian</title>
      <link>https://df7cb.de/blog/posts/2014/postgresql_9.4_on_debian.html</link>
      <pubDate>Fri, 16 May 2014 07:54:27 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2014/postgresql_9.4_on_debian.html</guid>
      <description>&lt;p&gt;Yesterday saw the first beta release of the new PostgreSQL version 9.4. Along&#xA;with the sources, we uploaded binary packages to Debian experimental and&#xA;apt.postgresql.org, so there&amp;rsquo;s now packages ready to be tested on Debian&#xA;wheezy, squeeze, testing/unstable, and Ubuntu trusty, saucy, precise, and&#xA;lucid.&lt;/p&gt;&#xA;&lt;p&gt;If you are using one of the release distributions of Debian or Ubuntu, add this&#xA;to your /etc/apt/sources.list.d/pgdg.list to have 9.4 available:&lt;/p&gt;&#xA;&lt;p&gt;deb &lt;a href=&#34;http://apt.postgresql.org/pub/repos/apt/&#34;&gt;http://apt.postgresql.org/pub/repos/apt/&lt;/a&gt; codename-pgdg main 9.4&lt;/p&gt;&#xA;&lt;p&gt;On Debian jessie and sid, install the packages from experimental.&lt;/p&gt;&#xA;&lt;p&gt;Happy testing!&lt;/p&gt;</description>
    </item>
    <item>
      <title>Trusty and Saucy on apt.postgresql.org</title>
      <link>https://df7cb.de/blog/posts/2014/trusty_and_saucy_on_apt.postgresql.org.html</link>
      <pubDate>Tue, 25 Feb 2014 09:32:01 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2014/trusty_and_saucy_on_apt.postgresql.org.html</guid>
      <description>&lt;p&gt;Over the past few weeks, new distributions have been added on&#xA;&lt;a href=&#34;http://apt.postgresql.org/&#34;&gt;apt.postgresql.org&lt;/a&gt;:&#xA;Ubuntu 13.10 codenamed &amp;ldquo;saucy&amp;rdquo; and the upcoming Ubuntu LTS release 14.04&#xA;codenamed &amp;ldquo;trusty&amp;rdquo;.&lt;/p&gt;&#xA;&lt;p&gt;Adding non-LTS releases for the benefit of developers using PostgreSQL on their&#xA;notebooks and desktop machines has been a frequently requested item since we&#xA;created the repository. I had some qualms about targeting a new Ubuntu release&#xA;every 6 months, but with having automated more and more parts of the repository&#xA;infrastructure, and the bootstrapping process now being painless, the&#xA;distributions are now available for use. Technically, trusty started as empty,&#xA;so it hasn&amp;rsquo;t all packages yet, but of course all the PostgreSQL server packages&#xA;are there, along with pgAdmin. Saucy started as a copy of precise (12.04) so it&#xA;has all packages. Not all packages have been rebuilt for saucy, but the precise&#xA;packages included (you can tell by the version number ending in .pgdg12.4+12 or&#xA;.pgdg13.10+1) will work, unless apt complains about dependency problems. I have&#xA;rebuilt the packages needing it I was aware about (most notably the&#xA;postgresql-plperl packages) - if you spot problems, please let us know on the&#xA;mailing list.&lt;/p&gt;&#xA;&lt;p&gt;Needless to say, last week&amp;rsquo;s PostgreSQL server updates are already included in&#xA;the repository.&lt;/p&gt;</description>
    </item>
    <item>
      <title>How not to monitor a boolean</title>
      <link>https://df7cb.de/blog/posts/2013/how_not_to_monitor_a_boolean.html</link>
      <pubDate>Mon, 25 Mar 2013 15:39:13 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2013/how_not_to_monitor_a_boolean.html</guid>
      <description>&lt;p&gt;We were lazy and wrote a simple PostgreSQL monitoring check in shell instead of&#xA;using some proper language. The code looked about this:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;out=$(psql -tAc &#34;SELECT some_stuff, t &gt; now() - &#39;1 day&#39;::interval FROM some_table&#34; some_db 2&gt;&amp;1)&#xA;case $out in&#xA;&#x9;*t) echo &#34;OK: $out&#34; ;;&#xA;&#x9;*) echo &#34;NOT OK: $out&#34; ;;&#xA;esac&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;If the string ends with &amp;rsquo;t&amp;rsquo;, all is well, if it ends with &amp;lsquo;f&amp;rsquo; or someting else, something is wrong.&lt;/p&gt;&#xA;&lt;p&gt;Unfortunately, this didn&amp;rsquo;t go that well:&lt;/p&gt;&#xA;&lt;p&gt;&lt;tt&gt;OK: psql: FATAL:  database &amp;ldquo;some_db&amp;rdquo; does not exis&lt;em&gt;t&lt;/em&gt;&lt;/tt&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>PostgreSQL minor releases</title>
      <link>https://df7cb.de/blog/posts/2013/postgresql_minor_releases.html</link>
      <pubDate>Thu, 07 Feb 2013 13:24:58 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2013/postgresql_minor_releases.html</guid>
      <description>&lt;p&gt;We&amp;rsquo;ve just put the new PostgreSQL minor releases live on apt.postgresql.org.&#xA;Building 5 major versions for 10 distributions produces quite a lot of stuff:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;25 .dsc files (source packages)&#xA;&lt;li&gt;745 .deb files (360 *_amd64.deb + 360 *_i386.deb + 25 *_all.deb)&#xA;&lt;li&gt;497 MB in *_amd64.deb files&#xA;&lt;li&gt;488 MB in *_i386.deb files&#xA;&lt;li&gt;58 MB in *_all.deb files&#xA;&lt;li&gt;73 MB in *.orig.tar.bz2 files&#xA;&lt;li&gt;in total 1118 MB&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;Compiling took a bit more than 10 hours on a 2-cpu VM. Of course that includes&#xA;running regression tests and the postgresql-common testsuite.&lt;/p&gt;&#xA;&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; This will be the last update published on pgapt.debian.net. Please&#xA;update your sources.list entries to point to apt.postgresql.org!&lt;/p&gt;</description>
    </item>
    <item>
      <title>apt.postgresql.org</title>
      <link>https://df7cb.de/blog/posts/2012/apt.postgresql.org.html</link>
      <pubDate>Fri, 07 Dec 2012 10:31:58 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2012/apt.postgresql.org.html</guid>
      <description>&lt;p&gt;So we finally made it, and sent out an&#xA;&lt;a href=&#34;http://archives.postgresql.org/pgsql-announce/2012-12/msg00008.php&#34;&gt;official announcement&lt;/a&gt; for&#xA;&lt;a href=&#34;https://wiki.postgresql.org/wiki/Apt&#34;&gt;apt.postgresql.org&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;This new repository hosts packages for all PostgreSQL server versions (at the&#xA;moment 8.3, 8.4, 9.0, 9.1, 9.2) for several Debian/Ubuntu distributions&#xA;(squeeze, wheezy, sid, precise) on two architectures (amd64, i386). Now add&#xA;packages for extension modules on top of all these, and you get a really large&#xA;amount of binaries from a small number of sources. Right now there&amp;rsquo;s 1670 .deb&#xA;files and 148 .dsc files, but the .dsc count includes variants that only differ&#xA;in the version number per distribution (we attach .pgdg60+1 for squeeze&#xA;packages, .pgdg70+1 for wheezy and so on), so the real number of different&#xA;sources is rather something like 81, with 38 distinct source package names.&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://tapoueh.org/&#34;&gt;Dimitri Fontaine&lt;/a&gt;,&#xA;&lt;a href=&#34;http://www.hagander.net/&#34;&gt;Magnus Hagander&lt;/a&gt;, and I have been working&#xA;on this since I first presented the idea at PGconf.EU 2011 in Amsterdam. We now&#xA;have a Jenkins server building all the packages, an archive server with the&#xA;master repository, and a feed that syncs the repository to the postgresql.org&#xA;FTP (well, mostly http) server.&lt;/p&gt;&#xA;&lt;p&gt;If you were previously using pgapt.debian.net, that&amp;rsquo;s the same archive as on&#xA;apt.postgresql.org (one rsync away). Please update your sources.list to point&#xA;to apt.postgresql.org, I&amp;rsquo;ll shut down the archive at that location at the end&#xA;of January.&lt;/p&gt;&#xA;&lt;p&gt;Here&amp;rsquo;s the &lt;a href=&#34;https://wiki.postgresql.org/wiki/Apt#Quickstart&#34;&gt;Quickstart&#xA;instructions from the Wiki page&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;p&gt;Import the repository key from &lt;a href=&#34;http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc&#34;&gt;http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc&lt;/a&gt;:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;wget -O - http://apt.postgresql.org/pub/repos/apt/ACCC4CF8.asc | sudo apt-key add -&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Edit /etc/apt/sources.list.d/pgdg.list. The distributions are called codename-pgdg. In the example, replace squeeze with the actual distribution you are using:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;deb http://apt.postgresql.org/pub/repos/apt/ squeeze-pgdg main&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Configure apt&amp;rsquo;s package pinning to prefer the PGDG packages over the Debian ones in /etc/apt/preferences.d/pgdg.pref:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;Package: *&#xA;Pin: release o=apt.postgresql.org&#xA;Pin-Priority: 500&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;Note: this will replace all your Debian/Ubuntu packages with available packages from the PGDG repository. If you do not want this, skip this step.&lt;/p&gt;&#xA;&lt;p&gt;Update the package lists, and install the pgdg-keyring package to automatically get repository key updates:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;apt-get update&#xA;apt-get install pgdg-keyring&#xA;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>pgbouncer running on the same hardware</title>
      <link>https://df7cb.de/blog/posts/2012/pgbouncer_running_on_the_same_hardware.html</link>
      <pubDate>Fri, 30 Nov 2012 08:52:40 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2012/pgbouncer_running_on_the_same_hardware.html</guid>
      <description>&lt;p&gt;We have a PostgreSQL server with 16 cores that was apparently running well&#xA;below its capacity: load something between 3.0 and 4.0, around 200 active&#xA;database connections, almost all always being &amp;lt;IDLE&amp;gt;. However, when the&#xA;tps count reached 7k transactions per second, things started to throttle, and&#xA;pgbouncer (running on the database server) started listing up to half of the&#xA;client connections to be in cl_waiting state. Load was still low, but&#xA;application performance was bad.&lt;/p&gt;&#xA;&lt;img src=&#34;http://www.df7cb.de/blog/2012/renice_pgbouncer.png&#34;&gt;&#xA;&lt;p&gt;The culprit turned out to be the kernel scheduler, fairly distributing CPU time&#xA;among all running processes. There&amp;rsquo;s one single pgbouncer process, but hundreds&#xA;of postgres processes.&lt;/p&gt;&#xA;&lt;p&gt;A simple &lt;em&gt;renice&lt;/em&gt; of the pgbouncer process did the trick and gave us another&#xA;extra 2k tps.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Shared Memory and Swapping</title>
      <link>https://df7cb.de/blog/posts/2012/shared_memory_and_swapping.html</link>
      <pubDate>Thu, 29 Nov 2012 10:23:10 +0100</pubDate>
      <guid>https://df7cb.de/blog/posts/2012/shared_memory_and_swapping.html</guid>
      <description>&lt;p&gt;We have this PostgreSQL server with plenty of RAM that is still using some of&#xA;its swap over the day (up to 600MB). Then suddenly everything is swapped in&#xA;again.&lt;/p&gt;&#xA;&lt;img src=&#34;http://www.df7cb.de/blog/2012/dbsrv_swap.png&#34;&gt;&#xA;&lt;p&gt;It turned out the reason is there are two clusters running, and the second one&#xA;isn&amp;rsquo;t used as heavily as the first one. Disk I/O activity of the first cluster&#xA;slowly evicts pages from the second shared buffers cache to swap, and then the&#xA;daily pg_dump run reads them back every evening.&lt;/p&gt;&#xA;&lt;p&gt;I was not aware of an easy way to get numbers for &amp;ldquo;amount of SysV shared memory&#xA;swapped to disk&amp;rdquo;, but some googling led to shmctl(2):&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;#define _GNU_SOURCE 1&#xA;#include &amp;lt;sys/ipc.h&amp;gt;&#xA;#include &amp;lt;sys/shm.h&amp;gt;&#xA;#include &amp;lt;stdio.h&amp;gt;&#xA;#include &amp;lt;unistd.h&amp;gt;&#xA;&#xA;int main ()&#xA;{&#xA;        struct shm_info info;&#xA;        int max;&#xA;        long PAGE_SIZE = sysconf(_SC_PAGESIZE);&#xA;&#xA;        max = shmctl(0, SHM_INFO, (struct shmid_ds *) &amp;info);&#xA;        printf (&#34;max: %d\nshm_tot: %ld\nshm_rss: %ld\nshm_swp: %ld\n&#34;,&#xA;                        max,&#xA;                        info.shm_tot * PAGE_SIZE,&#xA;                        info.shm_rss * PAGE_SIZE,&#xA;                        info.shm_swp * PAGE_SIZE);&#xA;&#xA;        return 0;&#xA;}&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;The output looks like this:&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;max: 13&#xA;shm_tot: 13232308224&#xA;shm_rss: 12626661376&#xA;shm_swp: 601616384&#xA;&lt;/pre&gt;&#xA;&lt;p&gt;&lt;b&gt;Update:&lt;/b&gt; Mark points out that &lt;em&gt;ipcs -mu&lt;/em&gt; shows the same information. Thanks for the hint!&lt;/p&gt;&#xA;&lt;pre&gt;&#xA;# ipcs -mu&#xA;&#xA;------ Shared Memory Status --------&#xA;segments allocated 2&#xA;pages allocated 3230544&#xA;pages resident  3177975&#xA;pages swapped   51585&#xA;Swap performance: 0 attempts     0 successes&#xA;&lt;/pre&gt;</description>
    </item>
    <item>
      <title>PostgreSQL in Debian Hackathon</title>
      <link>https://df7cb.de/blog/posts/2012/postgresql_in_debian_hackathon.html</link>
      <pubDate>Mon, 27 Aug 2012 14:21:08 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2012/postgresql_in_debian_hackathon.html</guid>
      <description>&lt;p&gt;Almost a year has passed since my talk at pgconf.eu 2011 in Amsterdam on&#xA;&lt;a href=&#34;http://www.postgresql.eu/events/schedule/pgconfeu2011/session/166-connecting-the-debian-and-postgresql-worlds/&#34;&gt;Connecting the Debian and PostgreSQL worlds&lt;/a&gt;,&#xA;and unfortunately little has happened on that front, mostly due to my limited&#xA;spare time between family and job.&#xA;&lt;a href=&#34;http://pgapt.debian.net/&#34;&gt;pgapt.debian.net&lt;/a&gt; is up and running, but&#xA;got few updates and is lagging behind on PostgreSQL releases.&lt;/p&gt;&#xA;&lt;p&gt;Luckily, we got the project moving. &lt;a href=&#34;http://tapoueh.org/blog/index.html&#34;&gt;Dimitri Fontaine&lt;/a&gt;&#xA;and &lt;a href=&#34;http://blog.hagander.net/&#34;&gt;Magnus Hagander&lt;/a&gt; suggested to do a&#xA;face-to-face meeting, so we got together at my house for two days last week and&#xA;discussed ideas, repository layouts, build scripts, and whatnot to get all of&#xA;us aligned for pushing the project ahead. My&#xA;&lt;a href=&#34;http://www.credativ.de/&#34;&gt;employer&lt;/a&gt; sponsored my time off work for&#xA;that. We almost finished moving the repository to postgresql.org&#xA;infrastructure, barring some questions of how to hook the repository into the&#xA;existing mirror infrastructure; this should get resolved this week.&lt;/p&gt;&#xA;&lt;p&gt;The build server running Jenkins is still located on my laptop, but moving this&#xA;to a proper host will also happen really soon now. We are using&#xA;&lt;a href=&#34;http://michael-prokop.at/blog/&#34;&gt;Mika Prokop&lt;/a&gt;&amp;rsquo;s&#xA;&lt;a href=&#34;http://jenkins-debian-glue.org/&#34;&gt;jenkins-debian-glue&lt;/a&gt; scripts for&#xA;driving the package build from Jenkins. The big plus point about Jenkins is&#xA;that it makes executing jobs on different distributions and architectures in&#xA;parallel much easier than a bunch of homemade shell scripts could get us with&#xA;reasonable effort.&lt;/p&gt;&#xA;&lt;p&gt;Here&amp;rsquo;s a list of random points we discussed:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;We decided to go for &amp;ldquo;pgdg&amp;rdquo; in version numbers and distribution names, i.e.&#xA;packages will have version numbers like 9.1.5-1.pgdg+1, with distributions&#xA;wheezy-pgdg, squeeze-pgdg, and so on.&lt;/li&gt;&#xA;&lt;li&gt;There will be Debian-testing-style distributions called like&#xA;wheezy-pgdg-testing that packages go into for some time before they get&#xA;promoted to the &amp;ldquo;live&amp;rdquo; distributions.&lt;/li&gt;&#xA;&lt;li&gt;PostgreSQL versions out of support (8.2 and below) will not be removed from&#xA;the repository, but will be moved to distributions called like&#xA;wheezy-pgdg-deprecated. People will still be able to use them, but the&#xA;naming should make it clear that they should really be upgrading.&lt;/li&gt;&#xA;&lt;li&gt;We have a slightly modified (compared to Debian unstable) postgresql-common&#xA;package that sets the &amp;ldquo;supported-versions&amp;rdquo; to all versions supported by the&#xA;PostgreSQL project. That will make the postgresql-server-dev-all package&#xA;pull in build-dependencies for all server versions, and make extension&#xA;module packages compile for all of them automatically. (Provided they are&#xA;using pg_buildext.)&lt;/li&gt;&#xA;&lt;li&gt;There&amp;rsquo;s no Ubuntu support in there yet, but that&amp;rsquo;s mostly only a matter of&#xA;adding more cowbuilder chroots to the build jobs. TBD soon.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;We really aim at using unmodified packages from Debian as much as possible, and&#xA;in fact this project doesn&amp;rsquo;t mean to replace Debian&amp;rsquo;s PostgreSQL packaging&#xA;work, but to extend it beyond the number of server versions (and Debian and&#xA;Ubuntu versions covered) supported. The people behind the Debian and Ubuntu&#xA;packages, and this repository are mostly the same, so we will claim that &amp;ldquo;our&amp;rdquo;&#xA;packages will be the same quality as the &amp;ldquo;original&amp;rdquo; ones. Big thanks go to&#xA;&lt;a href=&#34;http://www.piware.de/&#34;&gt;Martin Pitt&lt;/a&gt; for maintaining the&#xA;postgresql-common testsuite that really covers every aspect of running&#xA;PostgreSQL servers on Debian/Ubuntu systems.&lt;/p&gt;&#xA;&lt;p&gt;Stay tuned for updates! :)&lt;/p&gt;</description>
    </item>
    <item>
      <title>PostgreSQL in Debian</title>
      <link>https://df7cb.de/blog/posts/2011/postgresql_in_debian.html</link>
      <pubDate>Thu, 31 Mar 2011 22:22:57 +0200</pubDate>
      <guid>https://df7cb.de/blog/posts/2011/postgresql_in_debian.html</guid>
      <description>&lt;p&gt;At work, I&amp;rsquo;m dealing with lots of different database setups, luckily mostly&#xA;PostgreSQL running on Debian. At the same time, a fair amount of the tools in&#xA;the PostgreSQL ecosystem (not the PostgreSQL server packages itself) are not in&#xA;the best shape in the Debian archive.&lt;/p&gt;&#xA;&lt;p&gt;I&amp;rsquo;m trying to change that by adopting some of the packages. So far, I have&#xA;fixed a few RC bugs where packages where suddenly trying to build against&#xA;PostgreSQL 9.0 while expecting 8.4. To my surprise, there are no packages yet&#xA;in the archive that support multiple PostgreSQL versions in parallel. There is&#xA;even a package ready to help doing this -&#xA;&lt;a href=&#34;http://packages.debian.org/sid/postgresql-server-dev-all&#34;&gt;postgresql-server-dev-all&lt;/a&gt;,&#xA;but apparently nobody has used it yet. It turned out that after working around&#xA;a few trivial problems and adding just a few lines of sh code, it was pretty&#xA;straightforward&#xA;to port &lt;a href=&#34;http://packages.qa.debian.org/s/skytools.html&#34;&gt;skytools&lt;/a&gt; and&#xA;&lt;a href=&#34;http://packages.qa.debian.org/p/postgresql-pllua.html&#34;&gt;postgresql-pllua&lt;/a&gt;&#xA;to 9.0 while keeping 8.4 support. The latter has no version-specific code left&#xA;in debian/ except for a list of supported versions in debian/pgversions, so a&#xA;future port to 9.1 will be trivial. (Fun fact: the old postgresql-pllua version&#xA;0.8.1 was actually a typoed 0.3.1 version.)&lt;/p&gt;&#xA;&lt;p&gt;Most PostgreSQL tools use a common&#xA;&lt;a href=&#34;http://svn.debian.org/wsvn/pkg-postgresql/trunk/&#34;&gt;subversion repository on Alioth&lt;/a&gt;,&#xA;but there is no common mailing list address that is put into the Uploaders&#xA;fields, so it is hard to get an overview over the state of all packages. I&amp;rsquo;ve&#xA;compiled a list of all packages in svn, git, bzr (the server packages), and a&#xA;few others&#xA;&lt;a href=&#34;http://qa.debian.org/developer.php?login=pkg-postgresql-public@lists.alioth.debian.org&#34;&gt;in DDPO&lt;/a&gt;&#xA;to fix that for now.&lt;/p&gt;&#xA;&lt;p&gt;Other packages I&amp;rsquo;ve updated so far are&#xA;&lt;a href=&#34;http://packages.qa.debian.org/p/pgtune.html&#34;&gt;pgtune&lt;/a&gt;,&#xA;&lt;a href=&#34;http://packages.qa.debian.org/p/pgbouncer.html&#34;&gt;pgbouncer&lt;/a&gt;, and&#xA;&lt;a href=&#34;http://packages.qa.debian.org/p/pgpool2.html&#34;&gt;pgpool2&lt;/a&gt;.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
