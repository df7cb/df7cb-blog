<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Myon&#39;s Blog</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Christoph Berg">
    

    
<link rel="stylesheet" href="/blog/ananke/css/main.min.efe4d852f731d5d1fbb87718387202a97aafd768cdcdaed0662bbe6982e91824.css" >




    


    
      

    

    
    
      <link href="/blog/posts/index.xml" rel="alternate" type="application/rss+xml" title="Myon&#39;s Blog" />
      <link href="/blog/posts/index.xml" rel="feed" type="application/rss+xml" title="Myon&#39;s Blog" />
      
    

    
      <link rel="canonical" href="https://df7cb.de/blog/posts/index.html">
    

    <meta property="og:url" content="https://df7cb.de/blog/posts/index.html">
  <meta property="og:site_name" content="Myon&#39;s Blog">
  <meta property="og:title" content="Posts">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Posts">
  <meta itemprop="datePublished" content="2024-03-18T15:22:23+01:00">
  <meta itemprop="dateModified" content="2024-03-18T15:22:23+01:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Posts">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/blog/index.html" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Myon&#39;s Blog
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Posts
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="pa3 pa4-ns nested-copy-line-height">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy nested-links mid-gray"></section>
    <section class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2009/Too_much_magic_in_Gentoo.html" class="link black dim">
        Too much magic in Gentoo
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Five years after the release of patch 2.5.9, patch 2.6 was released two weeks
ago. The most interesting feature is that it will now produce reject files in
unified format when the input is in that format. Lucky for those of us whose
brain hurts when trying to read context diffs.</p>
<p>Of course there are more changes, and one of them is affecting Gentoo in particular:
<a href="http://blog.flameeyes.eu/2009/12/01/gentoo-service-announcement-keep-clear-of-gnu-patch-2-6">
Gentoo service announcement: keep clear of GNU patch-2.6</a>. The linked
<a href="http://bugs.gentoo.org/show_bug.cgi?id=293570">Gentoo bug #293570</a>
has attachments to reproduce the bug:</p>
<pre>
benz:~/tmp/tripwire-2.3.1-2 $ patch -p0 -F3 < ../tripwire-friend-classes.patch
patching file tripwire-2.3.1-2-p1/src/fco/fconame.h
Hunk #1 succeeded at 48 with fuzz 3 (offset -1 lines).
patching file tripwire-2.3.1-2-p1/src/fco/fcosetimpl.h
Hunk #1 succeeded at 45 with fuzz 3 (offset -1 lines).
patching file tripwire-2.3.1-2-p1/src/tw/fcoreport.h
Hunk #1 succeeded at 84 with fuzz 3 (offset -1 lines).

benz:~/tmp/tripwire-2.3.1-2 $ ls -l
drwxr-xr-x 4 cbe credativ 4096 18. Nov 05:03 src/
drwxr-xr-x 3 cbe credativ 4096  2. Dez 12:23 tripwire-2.3.1-2-p1/
</pre>
<p>Note that it created a new tripwire-2.3.1-2-p1 directory inside the existing
one, which is consistent with -p0. The newly created file contain just the &ldquo;+&rdquo;
lines from the patch. (There are no &ldquo;-&rdquo; lines.) patch 2.5.9 would have refused
the patch because it couldn&rsquo;t find the file to patch.</p>
<p>This is arguably a surprising behavior, but what really happens here is that
-F3 (fuzz 3) will explicitly tell patch to ignore 3 context lines if it cannot
apply the patch otherwise. diff&rsquo;s default behavior is to create patches with 3
lines of context. patch&rsquo;s default fuzz factor is one less than that, 2. Now, 3</p>
<ul>
<li>3 is zero, which doesn&rsquo;t leave <i>any</i> context left.</li>
</ul>
<p>Apparently lots of Gentoo ebuilds use -F3, and try to guess the correct number
of directories to strip, starting with -p0, -p1, &hellip; No wonder that things
break badly for them now, as patches will suddenly succeed with -p0.</p>
<p>I&rsquo;m not sure I like the new patch behavior, but in Gentoo&rsquo;s case I&rsquo;d say they
are using way too much magic in their build system, and now get bitten by
options they shouldn&rsquo;t have put there in the first place.</p>
    </div>
    <a href="/blog/posts/2009/Too_much_magic_in_Gentoo.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2009/Useless_statistics.html" class="link black dim">
        Useless statistics
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <pre>
projectb =>
SELECT
        array_accum(SUBSTRING(source FROM 1 FOR 1)) AS first,
        SUBSTRING(source FROM 2) AS rest
FROM
        (SELECT DISTINCT source FROM source) AS source
GROUP BY rest
HAVING
        COUNT(SUBSTRING(source FROM 1 FOR 1)) >= 4
ORDER BY rest;

        first        |  rest
---------------------+---------
 {c,f,j,l,p,s}       | am
 {a,g,n,y}           | ap
 {c,d,p,r,t,x}       | ar
 {b,d,l,s}           | ash
 {h,i,l,n,r,v}       | at
 {b,m,r,s}           | c
 {g,j,p,x}           | cal
 {e,g,p,x}           | cb
 {d,j,k,n,t}         | cc
 {a,f,i,v}           | check
 {a,d,e,g,m,u}       | cl
 {e,j,n,q,u,x}       | d
 {e,g,l,t,x}         | db
 {c,d,r,s}           | dd
 {j,l,o,u}           | de
 {f,g,l,s,w,x}       | dm
 {a,l,p,u}           | dns
 {e,l,n,q,r}         | e
 {j,s,t,x}           | ed
 {g,l,m,n}           | edit
 {c,e,f,x}           | fingerd
 {b,d,l,p,x}         | fm
 {g,k,p,y}           | forth
 {c,g,j,l}           | ftp
 {b,g,m,o,p}         | identd
 {f,k,t,v,z}         | ile
 {s,u,v,z}           | im
 {b,d,m,s,w}         | ing
 {b,g,w,z}           | ip
 {j,l,s,t}           | irc
 {a,c,f,j,u}         | lex
 {e,p,s,z}           | lib
 {f,k,r,x}           | log
 {i,m,o,q,s,v}       | m
 {c,q,s,w,x}         | mail
 {c,d,h,m,o,p,s,t,x} | make
 {e,i,l,x}           | mms
 {b,g,x,z}           | oo
 {b,c,r,s}           | play
 {e,f,g,r}           | pm
 {g,p,t,w,x}         | pp
 {i,q,w,x}           | print
 {a,b,m,o}           | sc
 {b,c,d,k,p,z}       | sh
 {a,f,p,x}           | sp
 {a,h,s,x}           | t
 {g,u,x,y}           | talk
 {a,e,i,k,q,w,x}     | term
 {a,h,i,m,n,p}       | top
 {c,k,q,r}           | torrent
 {a,h,l,n,o}         | tp
 {g,i,j,o}           | ts
 {c,j,n,o,r}         | unit
 {f,g,l,p,w}         | v
 {c,k,p,r}           | vm
 {i,l,n,s,x}         | watch
 {9,b,d,j,l,p,t}     | wm
 {g,j,r,w,x}         | zip
(58 Zeilen)
</pre>
<p>&hellip; and the winner is <em>make</em>!</p>
    </div>
    <a href="/blog/posts/2009/Useless_statistics.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Apt_options.html" class="link black dim">
        Apt options
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Set dpkg options: -o DPkg::Options::=&ndash;force-confmiss</p>
<p>Turn off apt key verification: -o Apt::Get::AllowUnauthenticated=true</p>
    </div>
    <a href="/blog/posts/2008/Apt_options.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Arrogant_database.html" class="link black dim">
        Arrogant database
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Imagine every Unix command would&hellip;</p>
<pre>
$ mysqladmin foo 2>&1 | hd
00000000  07 6d 79 73 71 6c 61 64  6d 69 6e 3a 20 63 6f 6e  |.mysqladmin: con|
</pre>
<p>&hellip; prepend ^G to its error messages.</p>
    </div>
    <a href="/blog/posts/2008/Arrogant_database.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/B%C3%BCcher.html" class="link black dim">
        Bücher
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <ul>
<li>Arthur Upfield: Der neue Schuh</li>
<li>John Irving: Bis ich dich finde</li>
<li>Agatha Christie: Peril at End House</li>
<li>Mónica Gloria Hoss de le Comte: The Mate</li>
<li>Khaled Housseini: The Kite Runner</li>
<li>Peter Eisentraut, Bernd Helmle: PostgreSQL-Administration</li>
</ul>
<p>Nachtrag:</p>
<ul>
<li>Bill Bryson: Down Under</li>
</ul>
    </div>
    <a href="/blog/posts/2008/B%C3%BCcher.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Cruftiness.html" class="link black dim">
        Cruftiness
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p><strong>Definition:</strong> A system&rsquo;s <em>cruftiness</em> is the number of
&ldquo;<code>apt-get remove `deborphan` </code>&rdquo; invocations needed to clean up.</p>
    </div>
    <a href="/blog/posts/2008/Cruftiness.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Dear_irssi.html" class="link black dim">
        Dear irssi
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>when a connection is lagging, and I type /reconnect, please don&rsquo;t try to
reconnect to the same IP in the rotation.</p>
<p>Thank you.</p>
    </div>
    <a href="/blog/posts/2008/Dear_irssi.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/debcheckout_saves_the_day.html" class="link black dim">
        debcheckout saves the day
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I have a small set of config files and cfengine scripts that I want to deploy
on every machine I own. Of course, the Debian way is to put them into a package,
and install that. So far so good.</p>
<p>Problems arise when trying to maintain this package on several different $HOME
directories - depending on where I am when I want a change. Using $vcs (svn in
this case) works, but I&rsquo;d also like source packages. Only that I occasionally
forget where I put the repository. Or uploading new source packages is too
tedious.</p>
<p>The later problem was solved by a cute combination of dput and reprepro. My
.dput.cf has targets that rsync the package over to my server, and
automatically install the packages into the repository there.</p>
<p>For the repository problem, Stefano Zacchiroli&rsquo;s <em>debcheckout</em> comes to the
rescue. Vcs-Svn: in debian/control points to my svn+ssh:// repository. Instant
&ldquo;DWIM&rdquo; checkouts! (To actually make this work, the latest cfengine tweaks add
deb-src lines for my local repository that were previously missing.)</p>
    </div>
    <a href="/blog/posts/2008/debcheckout_saves_the_day.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Erkrath_Teams.html" class="link black dim">
        Erkrath Teams
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>After a bit over half a year of having moved, I finally took the opportunity to play
real-life Bridge here. Thanks to BBO, a partner was found surprisingly fast,
and even we knew each other from the juniors bridge camp at Rieneck, but we
were unsure who actually the other one was from the folks there. So, the
evening started with a friendly &ldquo;Oh, you are Christoph :)&rdquo; at the entrance.</p>
<p>Bridge-wise the event wasn&rsquo;t very spectacular, just a teams tourney with the
average club players (though of course a teams event in the evening pushes up
the level a bit). We agreed on some 5M system, and the only real
misunderstanding was after opps had opened 2♥ (both M), 2♠ from Pd (no
agreement), ppp, which lead to a glorious 4-1 fit, and -150, but that didn&rsquo;t
cost much (if at all).</p>
<p>We had the feeling we started well, and reached the final round, but then lost
the remaining matches. To the great surprise of the whole team, we still won.
Of the 4 teams in the final round, VPs were distributed 46-46-46-42, with the
46s all 1:1 against each other, and it was us who had the better carry-over
from the first round. Thanks to Uschi for the good Bridge start here :)</p>
    </div>
    <a href="/blog/posts/2008/Erkrath_Teams.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/blog/posts/2008/Kernelspotting.html" class="link black dim">
        Kernelspotting
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>I just discovered a gem in the watch(1) manpage:</p>
<pre><code>   You can watch for your administrator to install the latest kernel with

          watch uname -r

   (Just kidding.)
</code></pre>
    </div>
    <a href="/blog/posts/2008/Kernelspotting.html" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
    </section>
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/blog/posts/index.html" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/7/index.html" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/6/index.html" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/7/index.html" aria-label="Page 7" class="page-link" role="button">7</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 8" class="page-link" role="button">8</a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/9/index.html" aria-label="Page 9" class="page-link" role="button">9</a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/10/index.html" aria-label="Page 10" class="page-link" role="button">10</a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/9/index.html" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/posts/page/16/index.html" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul></article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://df7cb.de/blog/index.html" >
    &copy;  Myon's Blog 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
